自我介绍：面试官您好，很感谢能得到这次的面试机会，我叫曾子洋，我是广东工业大学2020届的学生。我有过3段在校期间的项目经历：在线考试系统，仿天猫商城以及在线好友聊天系统。这几个月时间，我有幸去到了网易和华为实习。在网易期间我也做过2个项目：日志工时记录系统，图片打名字水印系统。我的自我介绍完了，十分感谢你能从百忙中来进行面试。



### 在线考试系统

功能：在线答案、试卷自动对选择题打分、主观题后台打分、论坛（发帖，回帖，回复）、排行榜；

技术栈

使用rabbitmq：异步处理，削峰(提交试卷)；

使用redis：做缓存，排行榜；

分布式事务：rocketmq、没有实际意义（每生成一份成绩，都修改试卷的已完成的人数）

分布式锁：zookeeper

分布式会话：nginx + redis session



### 天猫商城

功能：展示商品页面、下订单、付款、确认收货

使用redis：做缓存（分离冷热数据，mysql商品每月售出数量字段，根据字段排序放入redis中、加上redis的数据淘汰策略）；手动更新的话的时候调用一个删缓存接口

分布式事务：rocketmq：下订单的时候，库存减一



### 在线聊天系统

功能：在线聊天、添加好友

自定义ChatHandle：用户登录，把chanelId和用户ID关联起来

​									 发送信息：把聊天信息发送到对应用户id的对应chanel中去，并保存到数据库中去

​									 接受信息：批量接受，将信息id用‘，’连接，一次性去查数据库；

​									 心跳信息：在线的时候每隔一段时间发送，避免进入读写空闲

添加好友：http请求，ajax轮询；friends中加入2条记录；

四个表：user，friends，friendsRequset、ChatMsg



### 单点登录

用户请求A，A查session没查到登录状态，重定向到SSO。SSO查session没查到登录状态。

用户登录，将token存到session（key：log in）

用户再次请求A或B系统，重定向到SSO，通过session拿到token，后将token转发到A系统，A系统向SSO验证，成功后将token存到局部session（key：log in），后通过拦截。下一次再访问，查局部session，有则表明已登录。



### 每日工作日志

两张表：user，diary

### 图片打名字水印系统

user---project----projectUser---picStore---zipProgress

用户在项目中看到的图片都是经过水印处理的（获取到多个图片的key，循环用key去服务器请求图片，服务器将图片打水印后返回数据流）；

用户可以下载经过水印处理的单张图片，也可以下载包含整个项目的图片的压缩包

先从progress中根据userid和projectid获取创建时间大于project最后更新的时间，则直接获得key去服务器下载。

如果不存在则开辟一个新的线程，完成后将progress设置为finished，用户此时可以拿到s3服务器的key，则可以下载。